<!DOCTYPE HTML>
<html><head><meta charset="UTF-8"><title>Main</title><style type="text/css">html,head,body { padding:0; margin:0; }body { font-family: helvetica, arial, sans-serif; }</style></head><body><script type="text/javascript" src="../elm-runtime-0.7.js"></script><script type="text/javascript">
try{

if (Elm.Main) throw "Module name collision, 'Main' is already defined."; 
Elm.Main=function(){
 var $op={};
 for(Elm['i'] in Elm){eval('var '+Elm['i']+'=Elm[Elm.i];');}
 try{
  if (!(Elm.Prelude instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Prelude' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Prelude) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Prelude[Elm.i];');}
 try{
  if (!(Elm.Automaton instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Automaton' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var init_=Elm.Automaton.init_;
 try{
  if (!(Elm.Maybe instanceof Object)) throw 'module not found';
 } catch(e) {
  throw ("Module 'Maybe' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Maybe) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Maybe[Elm.i];');}
 function inRect_10(x_17){
  return function(y_18){
   return function(rect_19){
    return function(){
     var dx_20=(x_17-function(r){
      return r.hasOwnProperty('_') ? r.left[0] : r.left;}(rect_19));
     var dy_21=(y_18-function(r){
      return r.hasOwnProperty('_') ? r.top[0] : r.top;}(rect_19));
     return (function() { var ord = compare(dx_20)(0)[0]; return ord==='GT' || ord==='EQ'; }()&&((compare(dx_20)(function(r){
      return r.hasOwnProperty('_') ? r.width[0] : r.width;}(rect_19))[0] === 'LT')&&(function() { var ord = compare(dy_21)(0)[0]; return ord==='GT' || ord==='EQ'; }()&&(compare(dy_21)(function(r){
      return r.hasOwnProperty('_') ? r.height[0] : r.height;}(rect_19))[0] === 'LT'))));}();};};}
 function maybeHead_11(lst_22){
  return function(){
  switch(lst_22[0]){
   case 'Cons':
   return Just(lst_22[1]);
   case 'Nil':
   return Nothing;
  }
  throw "Non-exhaustive pattern match in case expression (Line 29, Column 17)";}();}
 function updateGame_12(input_24){
  return function(oldState_25){
   return function(){
    var clicked_26=function(r){
     return r.hasOwnProperty('_') ? r.clicked[0] : r.clicked;}(function(r){
     return r.hasOwnProperty('_') ? r.mouse[0] : r.mouse;}(input_24));
    var mouseX_27=function(r){
     return r.hasOwnProperty('_') ? r.x[0] : r.x;}(function(r){
     return r.hasOwnProperty('_') ? r.mouse[0] : r.mouse;}(input_24));
    var mouseY_28=function(r){
     return r.hasOwnProperty('_') ? r.y[0] : r.y;}(function(r){
     return r.hasOwnProperty('_') ? r.mouse[0] : r.mouse;}(input_24));
    var clickedOnDoor_32=(clicked_26?maybeHead_11(filter(clickedOnInThisRoom_31)(function(r){
     return r.hasOwnProperty('_') ? r.doors[0] : r.doors;}(oldState_25))):Nothing);
    var newState_33=(isNothing(clickedOnDoor_32)?oldState_25:function(){
     var r={_:[true]};
     var e=function(){
      var r={_:[true]};
      var e=oldState_25;
      for(var i in e){
       if (i!='room') { r[i]=e[i]; }
       else if (e[i].length>1) { r[i]=e[i].slice(1); }}
      return r;}();
     for(var i in e){r[i]=e[i];}
     var v=function(r){
      return r.hasOwnProperty('_') ? r.targetRoom[0] : r.targetRoom;}(clickedOnDoor_32);
     if (r.hasOwnProperty('room')) {
      r.room = r.room.slice(0);
      r.room.unshift(v);
     } else { r.room = [v]; }
     return r;}());
    var room_34=function(r){
     return r.hasOwnProperty('_') ? r.room[0] : r.room;}(newState_33);
    var bg_35=function(r){
     return r.hasOwnProperty('_') ? r.bg[0] : r.bg;}(room_34);
    var t_36=function(r){
     return r.hasOwnProperty('_') ? r.t[0] : r.t;}(input_24);
    var bgImage_37=image(function(r){
     return r.hasOwnProperty('_') ? r.width[0] : r.width;}(bg_35))(function(r){
     return r.hasOwnProperty('_') ? r.height[0] : r.height;}(bg_35))(Value.append(Value.str('images/bg/'),function(r){
     return r.hasOwnProperty('_') ? r.image[0] : r.image;}(bg_35)));
    var debug_38=flow(down)(map(function(x){
     return plainText(show(x));})(['Cons',input_24,['Cons',oldState_25,['Cons',newState_33,['Nil']]]]));
    var view_39=flow(down)(['Cons',bgImage_37,['Cons',debug_38,['Nil']]]);
    function inThisRoom_29(obj_40){
     return eq(function(r){
      return r.hasOwnProperty('_') ? r.room[0] : r.room;}(obj_40),function(r){
      return r.hasOwnProperty('_') ? r.room[0] : r.room;}(oldState_25));}
    function inRectInThisRoom_30(x_41){
     return function(y_42){
      return function(obj_43){
       return (inThisRoom_29(obj_43)&&inRect_10(x_41)(y_42)(obj_43));};};}
    function clickedOnInThisRoom_31(obj_44){
     return inRectInThisRoom_30(mouseX_27)(mouseY_28)(obj_44);}
    return ['Tuple2',view_39,newState_33];}();};}
 function mkinput_13(t_45){
  return function(clicked_46){
   return function(a0_47){
    return function(){
    switch(a0_47[0]){
     case 'Tuple2':
     return function(){
      var r_50=
       {mouse : [
       {clicked : [clicked_46],
        x : [a0_47[1]],
        y : [a0_47[2]],
        _ : [true]}],
        t : [t_45],
        _ : [true]};
      return r_50;}();
    }
    throw "Non-exhaustive pattern match in case expression (Line 49, Column 37)";}();};};}
 var gameWidth_0=1024;
 var gameHeight_1=768;
 var xga_2=
  {height : [768],
   width : [1024],
   _ : [true]};
 var ico_3=
  {height : [100],
   width : [100],
   _ : [true]};
 var screwDriver_4=
  {icon : [Value.str('ScrewDriver_1_inventory.png')],
   _ : [true]};
 var office_5=
  {bg : [function(){
  var r={_:[true]};
  var e=xga_2;
  for(var i in e){r[i]=e[i];}
  var v=Value.str('Office.jpg');
  if (r.hasOwnProperty('image')) {
   r.image = r.image.slice(0);
   r.image.unshift(v);
  } else { r.image = [v]; }
  return r;}()],
   _ : [true]};
 var officeExit_6=
  {height : [120],
   left : [140],
   room : [office_5],
   targetRoom : [corridor_7],
   top : [320],
   width : [96],
   _ : [true]};
 var corridor_7=
  {bg : [function(){
  var r={_:[true]};
  var e=xga_2;
  for(var i in e){r[i]=e[i];}
  var v=Value.str('Corridor.jpg');
  if (r.hasOwnProperty('image')) {
   r.image = r.image.slice(0);
   r.image.unshift(v);
  } else { r.image = [v]; }
  return r;}()],
   _ : [true]};
 var officeEntrance_8=
  {height : [120],
   left : [140],
   room : [corridor_7],
   targetRoom : [office_5],
   top : [320],
   width : [96],
   _ : [true]};
 var startState_9=
  {doors : [['Cons',officeEntrance_8,['Cons',officeExit_6,['Nil']]]],
   items : [['Cons',screwDriver_4,['Nil']]],
   room : [office_5],
   showingInventory : [true],
   _ : [true]};
 var input_14=lift3(mkinput_13)(Time.every(0.1))(Mouse.isClicked)(Mouse.position);
 var gameAutomaton_15=init_(startState_9)(updateGame_12);
 var main_16=Automaton.run(gameAutomaton_15)(input_14);
 return {$op : {},
 gameWidth:gameWidth_0,
 gameHeight:gameHeight_1,
 xga:xga_2,
 ico:ico_3,
 screwDriver:screwDriver_4,
 office:office_5,
 officeExit:officeExit_6,
 corridor:corridor_7,
 officeEntrance:officeEntrance_8,
 startState:startState_9,
 inRect:inRect_10,
 maybeHead:maybeHead_11,
 updateGame:updateGame_12,
 mkinput:mkinput_13,
 input:input_14,
 gameAutomaton:gameAutomaton_15,
 main:main_16};}();
Elm.main=function(){
 return Elm.Main.main;};
} catch (e) {
Elm.main=function() {
var msg = ('<br/><h2>Your browser may not be supported. Are you using a modern browser?</h2>' + '<br/><span style="color:grey">Runtime Error in Main module:<br/>' + e + '<br/><br/>The problem may stem from an improper usage of:<br/>init\'</span>');
document.body.innerHTML = Elm.Text.monospace(msg);throw e;};}</script><div id="widthChecker" style="width:100%; height:1px; position:absolute; top:-1px;"></div><div id="content"></div><script type="text/javascript">Dispatcher.initialize()</script><noscript><p>images/bg/</p></noscript></body></html>