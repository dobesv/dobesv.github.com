<!DOCTYPE HTML>
<html><head><meta charset="UTF-8"><title>Main</title><style type="text/css">html,head,body { padding:0; margin:0; }body { font-family: helvetica, arial, sans-serif; }</style></head><body><script type="text/javascript" src="elm-runtime-0.7.1.js"></script><script type="text/javascript">
try{

if (Elm.Main) throw new Error("Module name collision, 'Main' is already defined."); 
Elm.Main=function(){
 var $op={};
 for(Elm['i'] in Elm){eval('var '+Elm['i']+'=Elm[Elm.i];');}
 try{
  if (!(Elm.Prelude instanceof Object)) throw new Error('module not found');
 } catch(e) {
  throw new Error("Module 'Prelude' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Prelude) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Prelude[Elm.i];');}
 try{
  if (!(Elm.Automaton instanceof Object)) throw new Error('module not found');
 } catch(e) {
  throw new Error("Module 'Automaton' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var init$=Elm.Automaton.init$;
 try{
  if (!(Elm.Maybe instanceof Object)) throw new Error('module not found');
 } catch(e) {
  throw new Error("Module 'Maybe' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Maybe) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Maybe[Elm.i];');}
 try{
  if (!(Elm.Text instanceof Object)) throw new Error('module not found');
 } catch(e) {
  throw new Error("Module 'Text' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Text) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Text[Elm.i];');}
 try{
  if (!(Elm.Graphics instanceof Object)) throw new Error('module not found');
 } catch(e) {
  throw new Error("Module 'Graphics' is missing. Compile with --make flag or load missing module in a separate JavaScript file.");
 }
 var hiddenVars={};
 for (Elm['i'] in Elm.Graphics) {
  if (hiddenVars[Elm['i']]) continue;
  eval('var ' + Elm['i'] + ' = Elm.Graphics[Elm.i];');}
 var Screwdriver_8=['Screwdriver'];
 var Superphone_9=['Superphone'];
 var Office_10=['Office'];
 var Corridor_11=['Corridor'];
 var Infirmary_12=['Infirmary'];
 var EscapePod_13=['EscapePod'];
 var Idle_19=['Idle'];
 function ShowDescription_20(a1){
  return ['ShowDescription',a1];}
 function FadeOutTo_21(a1){
  return ['FadeOutTo',a1];}
 function FadeInTo_22(a1){
  return ['FadeInTo',a1];}
 function ChangeToRoom_23(a1){
  return ['ChangeToRoom',a1];}
 function PickUpItem_24(a1){
  return ['PickUpItem',a1];}
 function UseItem_25(a1){
  return ['UseItem',a1];}
 function indexBy_4(f_50){
  return function(lst_51){
   return Dict.fromList(map(function(v_52){
    return function(){
     var k_53=f_50(v_52);
     return ['Tuple2',k_53,v_52];}();})(lst_51));};}
 function indexById_5(lst_54){
  return indexBy_4(function(x){
   return show(function(r){
    return r.hasOwnProperty('_') ? r.id[0] : r.id;}(x));})(lst_54);}
 function groupBy_6(f_56){
  return function(lst_57){
   return function(){
    function addToGroup_58(v_59){
     return function(dict_60){
      return function(){
       var k_61=f_56(v_59);
       return ['Cons',Dict.insert(k_61)(v_59),Dict.findWithDefault(['Nil'])(k_61)(dict_60)];}();};}
    return List.foldr(addToGroup_58)(Dict.empty)(lst_57);}();};}
 $op['>>>'] = function(f_62){
  return function(g_63){
   return function(x){
    return g_63(f_62(x));};};};
 $op['|>'] = function(x_64){
  return function(g_65){
   return g_65(x_64);};};
 function half_7(x_66){
  return div(x_66)(2);}
 function inRect_27(x_82){
  return function(y_83){
   return function(rect_84){
    return function(){
     var dx_85=(x_82-function(r){
      return r.hasOwnProperty('_') ? r.left[0] : r.left;}(rect_84));
     var dy_86=(y_83-function(r){
      return r.hasOwnProperty('_') ? r.top[0] : r.top;}(rect_84));
     return (function() { var ord = compare(dx_85)(0)[0]; return ord==='GT' || ord==='EQ'; }()&&((compare(dx_85)(function(r){
      return r.hasOwnProperty('_') ? r.width[0] : r.width;}(rect_84))[0] === 'LT')&&(function() { var ord = compare(dy_86)(0)[0]; return ord==='GT' || ord==='EQ'; }()&&(compare(dy_86)(function(r){
      return r.hasOwnProperty('_') ? r.height[0] : r.height;}(rect_84))[0] === 'LT'))));}();};};}
 function headMaybe_28(lst_87){
  return function(){
  switch(lst_87[0]){
   case 'Cons':
   return Just(lst_87[1]);
   case 'Nil':
   return Nothing;
  }
  throw new Error("Non-exhaustive pattern match in case expression (Line 109, Column 17)");}();}
 function find_29(p_89){
  return function(lst_90){
   return function(){
   switch(lst_90[0]){
    case 'Cons':
    return (p_89(lst_90[1])?Just(lst_90[1]):find_29(p_89)(lst_90[2]));
    case 'Nil':
    return Nothing;
   }
   throw new Error("Non-exhaustive pattern match in case expression (Line 113, Column 14)");}();};}
 function findRoom_30(id_93){
  return Dict.findWithDefault(badRoomId_18)(show(id_93))(rooms_17);}
 function findItem_31(id_94){
  return Dict.findWithDefault(badItemId_16)(show(id_94))(items_15);}
 function tryInTurn_32(defaultValue_95){
  return function(flist_96){
   return function(){
   switch(flist_96[0]){
    case 'Cons':
    return function(){
    var case9=flist_96[1](['Tuple0']);
    switch(case9[0]){
     case 'Just':
     return case9[1];
     case 'Nothing':
     return tryInTurn_32(defaultValue_95)(flist_96[2]);
    }
    throw new Error("Non-exhaustive pattern match in case expression (Line 123, Column 17)");}();
    case 'Nil':
    return defaultValue_95;
   }
   throw new Error("Non-exhaustive pattern match in case expression (Line 121, Column 5)");}();};}
 function maybeMap_33(f_100){
  return function(x_101){
   return function(){
   switch(x_101[0]){
    case 'Just':
    return Just(f_100(x_101[1]));
    case 'Nothing':
    return Nothing;
   }
   throw new Error("Non-exhaustive pattern match in case expression (Line 127, Column 5)");}();};}
 function offsetBy_39(_0_103){
  return function(elt_104){
   return function(){
    var left_105=function(r){
     return r.hasOwnProperty('_') ? r.left[0] : r.left;}(_0_103);
    var top_106=function(r){
     return r.hasOwnProperty('_') ? r.top[0] : r.top;}(_0_103);
    return function(){
     var width_107=(left_105+widthOf(elt_104));
     var height_108=(top_106+heightOf(elt_104));
     var location_109=topLeftAt(absolute(left_105))(absolute(top_106));
     return container(width_107)(height_108)(location_109)(elt_104);}();}();};}
 function paddedBy_41(_0_110){
  return function(elt_111){
   return function(){
    var left_112=function(r){
     return r.hasOwnProperty('_') ? r.left[0] : r.left;}(_0_110);
    var top_113=function(r){
     return r.hasOwnProperty('_') ? r.top[0] : r.top;}(_0_110);
    var right_114=function(r){
     return r.hasOwnProperty('_') ? r.right[0] : r.right;}(_0_110);
    var bottom_115=function(r){
     return r.hasOwnProperty('_') ? r.bottom[0] : r.bottom;}(_0_110);
    return function(){
     var location_116=topLeftAt(absolute(left_112))(absolute(top_113));
     var width_117=((left_112+widthOf(elt_111))+right_114);
     var height_118=((top_113+heightOf(elt_111))+bottom_115);
     return container(width_117)(height_118)(location_116)(elt_111);}();}();};}
 function nthMaybe_42(n_119){
  return function(lst_120){
   return function(){
   switch(lst_120[0]){
    case 'Cons':
    return (eq(n_119,0)?Just(lst_120[1]):nthMaybe_42((n_119-1))(lst_120[2]));
    case 'Nil':
    return Nothing;
   }
   throw new Error("Non-exhaustive pattern match in case expression (Line 172, Column 5)");}();};}
 function updateGame_45(input_123){
  return function(oldState_124){
   return function(){
    var _0_125=input_123;
    var t_126=function(r){
     return r.hasOwnProperty('_') ? r.t[0] : r.t;}(_0_125);
    var mouse_127=function(r){
     return r.hasOwnProperty('_') ? r.mouse[0] : r.mouse;}(_0_125);
    var clicked_128=function(r){
     return r.hasOwnProperty('_') ? r.clicked[0] : r.clicked;}(mouse_127);
    var oldRoom_130=findRoom_30(function(r){
     return r.hasOwnProperty('_') ? r.room[0] : r.room;}(oldState_124));
    var pickupsNotPickedUp_131=filter(function(p_150){
     return eq(Dict.lookup(show(function(r){
      return r.hasOwnProperty('_') ? r.item[0] : r.item;}(p_150)))(function(r){
      return r.hasOwnProperty('_') ? r.inventory[0] : r.inventory;}(oldState_124)),Nothing);})(function(r){
     return r.hasOwnProperty('_') ? r.pickups[0] : r.pickups;}(oldRoom_130));
    var heldItems_132=Dict.values(function(r){
     return r.hasOwnProperty('_') ? r.inventory[0] : r.inventory;}(oldState_124));
    var newActivity_134=function(){
     var oldActivity_152=function(r){
      return r.hasOwnProperty('_') ? r.activity[0] : r.activity;}(oldState_124);
     function fadeOutTo_153(next_165){
      return FadeOutTo_21({
        endTime : [(t_126+fadeTime_43)],
        next : [next_165],
        startTime : [t_126],
        _ : [true]});}
     function fadeInTo_154(next_166){
      return FadeInTo_22({
        endTime : [(t_126+fadeTime_43)],
        next : [next_166],
        startTime : [t_126],
        _ : [true]});}
     function checkFade_155(_0_167){
      return function(){
      switch(_0_167[0]){
       case 'Tuple0':
       return function(){
       var case17=function(r){
        return r.hasOwnProperty('_') ? r.activity[0] : r.activity;}(oldState_124);
       switch(case17[0]){
        case 'FadeInTo':
        return Just(((compare(function(r){
         return r.hasOwnProperty('_') ? r.endTime[0] : r.endTime;}(case17[1]))(t_126)[0] === 'LT')?function(r){
         return r.hasOwnProperty('_') ? r.next[0] : r.next;}(case17[1]):function(r){
         return r.hasOwnProperty('_') ? r.activity[0] : r.activity;}(oldState_124)));
        case 'FadeOutTo':
        return Just(((compare(function(r){
         return r.hasOwnProperty('_') ? r.endTime[0] : r.endTime;}(case17[1]))(t_126)[0] === 'LT')?function(r){
         return r.hasOwnProperty('_') ? r.next[0] : r.next;}(case17[1]):function(r){
         return r.hasOwnProperty('_') ? r.activity[0] : r.activity;}(oldState_124)));
       }
       return Nothing;}();
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 192, Column 21)");}();}
     function checkEnteredRoom_156(_0_171){
      return function(){
      switch(_0_171[0]){
       case 'Tuple0':
       return function(){
       switch(oldActivity_152[0]){
        case 'ChangeToRoom':
        return Just(fadeInTo_154(Idle_19));
       }
       return Nothing;}();
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 197, Column 21)");}();}
     function showDescription_157(text_173){
      return ShowDescription_20({
        endTime : [(t_126+descriptionTime_44)],
        text : [text_173],
        _ : [true]});}
     function checkUseItem_158(_0_174){
      return function(){
      switch(_0_174[0]){
       case 'Tuple0':
       return Nothing;
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 201, Column 35)");}();}
     function checkMiniGame_159(_0_175){
      return function(){
      switch(_0_175[0]){
       case 'Tuple0':
       return function(){
       switch(oldActivity_152[0]){
        case 'UseItem':
        switch(oldActivity_152[1][0]){
         case 'Superphone':
         return Nothing;
        }break;
       }
       return Nothing;}();
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 203, Column 21)");}();}
     function checkDoor_160(_0_177){
      return function(){
      switch(_0_177[0]){
       case 'Tuple0':
       return maybeMap_33($op['>>>'](function(__178){
        return function(r){
         return r.hasOwnProperty('_') ? r.targetRoom[0] : r.targetRoom;}(__178);})(function(x){
        return fadeOutTo_153(ChangeToRoom_23(x));}))(findClickedOn_133(function(r){
        return r.hasOwnProperty('_') ? r.doors[0] : r.doors;}(oldRoom_130)));
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 206, Column 32)");}();}
     function checkPickup_161(_0_179){
      return function(){
      switch(_0_179[0]){
       case 'Tuple0':
       return maybeMap_33($op['>>>'](function(__180){
        return function(r){
         return r.hasOwnProperty('_') ? r.item[0] : r.item;}(__180);})(PickUpItem_24))(findClickedOn_133(pickupsNotPickedUp_131));
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 207, Column 34)");}();}
     function checkProp_162(_0_181){
      return function(){
      switch(_0_181[0]){
       case 'Tuple0':
       return maybeMap_33($op['>>>'](function(__182){
        return function(r){
         return r.hasOwnProperty('_') ? r.description[0] : r.description;}(__182);})(showDescription_157))(findClickedOn_133(function(r){
        return r.hasOwnProperty('_') ? r.props[0] : r.props;}(oldRoom_130)));
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 208, Column 32)");}();}
     function checkInventory_163(_0_183){
      return function(){
      switch(_0_183[0]){
       case 'Tuple0':
       return (clicked_128?(underMouse_129(inventoryArea_36)?function(){
        var firstItemLeft_184=((function(r){
         return r.hasOwnProperty('_') ? r.x[0] : r.x;}(mouse_127)-function(r){
         return r.hasOwnProperty('_') ? r.left[0] : r.left;}(inventoryArea_36))-function(r){
         return r.hasOwnProperty('_') ? r.left[0] : r.left;}(function(r){
         return r.hasOwnProperty('_') ? r.item[0] : r.item;}(inventoryArea_36)));
        var invIndex_185=div(firstItemLeft_184)(function(r){
         return r.hasOwnProperty('_') ? r.width[0] : r.width;}(function(r){
         return r.hasOwnProperty('_') ? r.item[0] : r.item;}(inventoryArea_36)));
        return $op['|>'](nthMaybe_42(invIndex_185)(heldItems_132))(maybeMap_33(UseItem_25));}():Nothing):function(){
       switch(oldActivity_152[0]){
        case 'UseItem':
        return Just(oldActivity_152);
       }
       return Nothing;}());
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 210, Column 21)");}();}
     function checkDescription_164(_0_188){
      return function(){
      switch(_0_188[0]){
       case 'Tuple0':
       return function(){
       switch(oldActivity_152[0]){
        case 'ShowDescription':
        return ((clicked_128||(compare(function(r){
         return r.hasOwnProperty('_') ? r.endTime[0] : r.endTime;}(oldActivity_152[1]))(t_126)[0] === 'LT'))?Nothing:Just(oldActivity_152));
       }
       return Nothing;}();
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 221, Column 21)");}();}
     return tryInTurn_32(Idle_19)(['Cons',checkFade_155,['Cons',checkMiniGame_159,['Cons',checkEnteredRoom_156,['Cons',checkUseItem_158,['Cons',checkPickup_161,['Cons',checkProp_162,['Cons',checkDoor_160,['Cons',checkInventory_163,['Cons',checkDescription_164,['Nil']]]]]]]]]]);}();
    var newState_135={
      activity : [newActivity_134],
      inventory : [function(){
    switch(newActivity_134[0]){
     case 'PickUpItem':
     return Dict.insert(show(newActivity_134[1]))(newActivity_134[1])(function(r){
      return r.hasOwnProperty('_') ? r.inventory[0] : r.inventory;}(oldState_124));
    }
    return function(r){
     return r.hasOwnProperty('_') ? r.inventory[0] : r.inventory;}(oldState_124);}()],
      lastClick : [(clicked_128?mouse_127:input_123)],
      room : [function(){
    switch(newActivity_134[0]){
     case 'ChangeToRoom':
     return newActivity_134[1];
    }
    return function(r){
     return r.hasOwnProperty('_') ? r.room[0] : r.room;}(oldState_124);}()],
      _ : [true]};
    var newRoom_136=(eq(function(r){
     return r.hasOwnProperty('_') ? r.room[0] : r.room;}(newState_135),function(r){
     return r.hasOwnProperty('_') ? r.room[0] : r.room;}(oldState_124))?oldRoom_130:findRoom_30(function(r){
     return r.hasOwnProperty('_') ? r.room[0] : r.room;}(newState_135)));
    var bg_137=function(r){
     return r.hasOwnProperty('_') ? r.bg[0] : r.bg;}(newRoom_136);
    var bgImage_138=image(function(r){
     return r.hasOwnProperty('_') ? r.width[0] : r.width;}(bg_137))(function(r){
     return r.hasOwnProperty('_') ? r.height[0] : r.height;}(bg_137))(Value.append(Value.str('images/bg/'),function(r){
     return r.hasOwnProperty('_') ? r.image[0] : r.image;}(bg_137)));
    var debugView_139=function(){
     var debugTextView_195=$op['>>>'](show)($op['>>>'](toText)($op['>>>'](Text.color(green))($op['>>>'](Text.monospace)(Graphics.text))));
     var views_196=['Cons',input_123,['Cons',oldState_124,['Cons',newState_135,['Nil']]]];
     return flow(down)(map(debugTextView_195)(views_196));}();
    var dialogView_140=function(){
     var text_197=function(){
     switch(newActivity_134[0]){
      case 'ShowDescription':
      return function(){
       var _0_199=newActivity_134[1];
       var text_200=function(r){
        return r.hasOwnProperty('_') ? r.text[0] : r.text;}(_0_199);
       return text_200;}();
     }
     return Value.str('');}();
     return $op['|>'](text_197)($op['>>>'](toText)($op['>>>'](Text.color(dialogTextColor_37))($op['>>>'](Text.height(1.5))($op['>>>'](Text.typeface(Value.str('\'Trebuchet MS\', Helvetica, sans-serif')))($op['>>>'](centeredText)($op['>>>'](Graphics.width(gameWidth_0))($op['>>>'](Graphics.color(Color.rgba(0)(0)(0)(0.5)))(container(gameWidth_0)(half_7(gameHeight_1))(middle)))))))));}();
    var tipView_141=function(){
     var tipText_203=tryInTurn_32(Value.str(''))(['Cons',checkPickup_202,['Nil']]);
     function checkPickup_202(_0_204){
      return function(){
      switch(_0_204[0]){
       case 'Tuple0':
       return maybeMap_33($op['>>>'](function(__205){
        return function(r){
         return r.hasOwnProperty('_') ? r.label[0] : r.label;}(__205);})(function(y_207){
        return Value.append(Value.str('Pick up '),y_207);}))(find_29(underMouse_129)(pickupsNotPickedUp_131));
      }
      throw new Error("Non-exhaustive pattern match in case expression (Line 265, Column 34)");}();}
     return $op['|>'](tipText_203)($op['>>>'](toText)($op['>>>'](Text.color(dialogTextColor_37))($op['>>>'](Text.height(1))($op['>>>'](Text.typeface(Value.str('\'Trebuchet MS\', Helvetica, sans-serif')))($op['>>>'](centeredText)($op['>>>'](Graphics.width(gameWidth_0))($op['>>>'](Graphics.color(Color.rgba(0)(0)(0)(0.5)))(container(gameWidth_0)(half_7(gameHeight_1))(middle)))))))));}();
    var pickupViews_142=map(function(p_208){
     return offsetBy_39(p_208)(image(function(r){
      return r.hasOwnProperty('_') ? r.width[0] : r.width;}(p_208))(function(r){
      return r.hasOwnProperty('_') ? r.height[0] : r.height;}(p_208))(Value.append(Value.str('images/props/'),function(r){
      return r.hasOwnProperty('_') ? r.image[0] : r.image;}(p_208))));})(pickupsNotPickedUp_131);
    var inventoryView_143=(eq(function(r){
     return r.hasOwnProperty('_') ? r.inventory[0] : r.inventory;}(newState_135),Dict.empty)?plainText(''):function(){
     var itemIcons_210=flow(right)(List.map($op['>>>'](findItem_31)(itemImage_209))(heldItems_132));
     var itemIconArea_211=offsetBy_39(function(r){
      return r.hasOwnProperty('_') ? r.item[0] : r.item;}(inventoryArea_36))(itemIcons_210);
     var itemBg_212=image(function(r){
      return r.hasOwnProperty('_') ? r.width[0] : r.width;}(inventoryArea_36))(function(r){
      return r.hasOwnProperty('_') ? r.height[0] : r.height;}(inventoryArea_36))(function(r){
      return r.hasOwnProperty('_') ? r.bg[0] : r.bg;}(inventoryArea_36));
     function itemImage_209(item_213){
      return image(function(r){
       return r.hasOwnProperty('_') ? r.width[0] : r.width;}(function(r){
       return r.hasOwnProperty('_') ? r.item[0] : r.item;}(inventoryArea_36)))(function(r){
       return r.hasOwnProperty('_') ? r.height[0] : r.height;}(function(r){
       return r.hasOwnProperty('_') ? r.item[0] : r.item;}(inventoryArea_36)))(Value.append(Value.str('images/icon/'),function(r){
       return r.hasOwnProperty('_') ? r.icon[0] : r.icon;}(item_213)));}
     return layers(['Cons',itemBg_212,['Cons',itemIconArea_211,['Nil']]]);}());
    var bottomUIView_145=container(gameWidth_0)(gameHeight_1)(midBottom)(flow(down)(['Cons',tipView_141,['Cons',offsetBy_39(inventoryArea_36)(inventoryView_143),['Nil']]]));
    var miniGameViews_146=['Nil'];
    var stage_147=layers(['Cons',bgImage_138,Value.append(pickupViews_142,['Cons',bottomUIView_145,['Cons',dialogView_140,miniGameViews_146]])]);
    var view_148=Graphics.color(black)(flow(down)(['Cons',applyFade_144(stage_147),['Cons',debugView_139,['Nil']]]));
    function underMouse_129(obj_149){
     return inRect_27(function(r){
      return r.hasOwnProperty('_') ? r.x[0] : r.x;}(mouse_127))(function(r){
      return r.hasOwnProperty('_') ? r.y[0] : r.y;}(mouse_127))(obj_149);}
    function findClickedOn_133(objs_151){
     return (clicked_128?find_29(underMouse_129)(objs_151):Nothing);}
    function applyFade_144(elt_214){
     return function(){
      var alpha_216=function(){
      switch(newActivity_134[0]){
       case 'ChangeToRoom':
       return 0.0;
       case 'FadeInTo':
       return fadeAmount_215(newActivity_134[1]);
       case 'FadeOutTo':
       return (1.0-fadeAmount_215(newActivity_134[1]));
      }
      return 1.0;}();
      function fadeAmount_215(_0_217){
       return function(){
        var next_218=function(r){
         return r.hasOwnProperty('_') ? r.next[0] : r.next;}(_0_217);
        var startTime_219=function(r){
         return r.hasOwnProperty('_') ? r.startTime[0] : r.startTime;}(_0_217);
        var endTime_220=function(r){
         return r.hasOwnProperty('_') ? r.endTime[0] : r.endTime;}(_0_217);
        return ((t_126-startTime_219)/(endTime_220-startTime_219));}();}
      return ((compare(alpha_216)(1.0)[0] === 'LT')?opacity(alpha_216)(elt_214):elt_214);}();}
    return ['Tuple2',view_148,newState_135];}();};}
 function mkinput_46(t_224){
  return function(clicked_225){
   return function(_0_226){
    return function(){
    switch(_0_226[0]){
     case 'Tuple2':
     return function(){
      var r_229={
        mouse : [{
        clicked : [clicked_225],
        x : [_0_226[1]],
        y : [_0_226[2]],
        _ : [true]}],
        t : [t_224],
        _ : [true]};
      return r_229;}();
    }
    throw new Error("Non-exhaustive pattern match in case expression (Line 301, Column 37)");}();};};}
 var gameWidth_0=1024;
 var gameHeight_1=768;
 var xga_2={
   height : [768],
   width : [1024],
   _ : [true]};
 var ico_3={
   height : [100],
   width : [100],
   _ : [true]};
 var itemList_14=['Cons',{
   icon : [Value.str('screwdriver.png')],
   id : [Screwdriver_8],
   _ : [true]},['Cons',{
   icon : [Value.str('superphone.png')],
   id : [Superphone_9],
   _ : [true]},['Nil']]];
 var items_15=indexById_5(itemList_14);
 var badItemId_16={
   icon : [Value.str('XXX.png')],
   id : [Screwdriver_8],
   _ : [true]};
 var rooms_17=function(){
  var roomList_67=['Cons',{
    bg : [function(){
   var r={_:[true]};
   var e=xga_2;
   for(var i in e){r[i]=e[i];}
   var v=Value.str('Corridor.jpg');
   if (r.hasOwnProperty('image')) {
    r.image = r.image.slice(0);
    r.image.unshift(v);
   } else { r.image = [v]; }
   return r;}()],
    id : [Corridor_11],
    _ : [true]},['Cons',{
    bg : [function(){
   var r={_:[true]};
   var e=xga_2;
   for(var i in e){r[i]=e[i];}
   var v=Value.str('Infirmary.jpg');
   if (r.hasOwnProperty('image')) {
    r.image = r.image.slice(0);
    r.image.unshift(v);
   } else { r.image = [v]; }
   return r;}()],
    id : [Infirmary_12],
    _ : [true]},['Cons',{
    bg : [function(){
   var r={_:[true]};
   var e=xga_2;
   for(var i in e){r[i]=e[i];}
   var v=Value.str('Escape Pod.jpg');
   if (r.hasOwnProperty('image')) {
    r.image = r.image.slice(0);
    r.image.unshift(v);
   } else { r.image = [v]; }
   return r;}()],
    id : [EscapePod_13],
    _ : [true]},['Cons',{
    bg : [function(){
   var r={_:[true]};
   var e=xga_2;
   for(var i in e){r[i]=e[i];}
   var v=Value.str('Office.jpg');
   if (r.hasOwnProperty('image')) {
    r.image = r.image.slice(0);
    r.image.unshift(v);
   } else { r.image = [v]; }
   return r;}()],
    id : [Office_10],
    _ : [true]},['Nil']]]]];
  var doors_68=['Cons',{
    height : [407],
    left : [473],
    room : [Office_10],
    targetRoom : [Corridor_11],
    top : [99],
    width : [248],
    _ : [true]},['Cons',{
    height : [120],
    left : [140],
    room : [Corridor_11],
    targetRoom : [Office_10],
    top : [320],
    width : [96],
    _ : [true]},['Cons',{
    height : [120],
    left : [770],
    room : [Corridor_11],
    targetRoom : [Infirmary_12],
    top : [320],
    width : [96],
    _ : [true]},['Cons',{
    height : [395],
    left : [665],
    room : [Infirmary_12],
    targetRoom : [Corridor_11],
    top : [232],
    width : [313],
    _ : [true]},['Cons',{
    height : [26],
    left : [305],
    room : [Corridor_11],
    targetRoom : [EscapePod_13],
    top : [469],
    width : [118],
    _ : [true]},['Cons',{
    height : [91],
    left : [294],
    room : [EscapePod_13],
    targetRoom : [Corridor_11],
    top : [139],
    width : [199],
    _ : [true]},['Nil']]]]]]];
  var props_69=['Cons',{
    description : [Value.str('Some kind of display terminal.  Probably displays very useful information; if I only knew how to turn it on!')],
    height : [93],
    left : [117],
    room : [Office_10],
    top : [249],
    width : [59],
    _ : [true]},['Cons',{
    description : [Value.str('My predecessor.')],
    height : [213],
    left : [183],
    room : [Office_10],
    top : [316],
    width : [106],
    _ : [true]},['Cons',{
    description : [Value.str('Those instruments look very unique.  Could they be part of my job here?')],
    height : [390],
    left : [738],
    room : [Office_10],
    top : [290],
    width : [133],
    _ : [true]},['Cons',{
    description : [Value.str('Looks like the escape pod has already launched!')],
    height : [25],
    left : [514],
    room : [Corridor_11],
    top : [469],
    width : [111],
    _ : [true]},['Nil']]]]];
  var pickups_70=['Cons',{
    height : [100],
    image : [Value.str('ScrewDriver_1_screen.png')],
    item : [Screwdriver_8],
    label : [Value.str('screw driver')],
    left : [190],
    room : [Office_10],
    top : [291],
    width : [100],
    _ : [true]},['Cons',{
    height : [100],
    image : [Value.str('phone_pocket.png')],
    item : [Superphone_9],
    label : [Value.str('phone')],
    left : [169],
    room : [Office_10],
    top : [379],
    width : [100],
    _ : [true]},['Nil']]];
  function aug_71(r_72){
   return function(){
    var r1_74=function(){
     var r={_:[true]};
     var e=r_72;
     for(var i in e){r[i]=e[i];}
     var v=flt_73(r_72)(doors_68);
     if (r.hasOwnProperty('doors')) {
      r.doors = r.doors.slice(0);
      r.doors.unshift(v);
     } else { r.doors = [v]; }
     return r;}();
    var r2_75=function(){
     var r={_:[true]};
     var e=r1_74;
     for(var i in e){r[i]=e[i];}
     var v=flt_73(r_72)(props_69);
     if (r.hasOwnProperty('props')) {
      r.props = r.props.slice(0);
      r.props.unshift(v);
     } else { r.props = [v]; }
     return r;}();
    var r3_76=function(){
     var r={_:[true]};
     var e=r2_75;
     for(var i in e){r[i]=e[i];}
     var v=flt_73(r_72)(pickups_70);
     if (r.hasOwnProperty('pickups')) {
      r.pickups = r.pickups.slice(0);
      r.pickups.unshift(v);
     } else { r.pickups = [v]; }
     return r;}();
    function flt_73(r_77){
     return function(lst_78){
      return List.filter($op['>>>'](function(__79){
       return function(r){
        return r.hasOwnProperty('_') ? r.room[0] : r.room;}(__79);})(function(x_80){
       return function(y_81){
        return eq(x_80,y_81);};}(function(r){
       return r.hasOwnProperty('_') ? r.id[0] : r.id;}(r_77))))(lst_78);};}
    return r3_76;}();}
  return indexById_5(map(aug_71)(roomList_67));}();
 var badRoomId_18={
   bg : [function(){
  var r={_:[true]};
  var e=xga_2;
  for(var i in e){r[i]=e[i];}
  var v=Value.str('Missing.jpg');
  if (r.hasOwnProperty('image')) {
   r.image = r.image.slice(0);
   r.image.unshift(v);
  } else { r.image = [v]; }
  return r;}()],
   doors : [['Nil']],
   id : [Office_10],
   pickups : [['Nil']],
   props : [['Nil']],
   _ : [true]};
 var startState_26={
   activity : [Idle_19],
   dialog : [Nothing],
   fade : [0],
   inventory : [Dict.empty],
   lastClick : [{
   _ : [true]}],
   room : [Office_10],
   showingInventory : [true],
   _ : [true]};
 var inventoryWidth_34=809;
 var inventoryHeight_35=106;
 var inventoryArea_36={
   bg : [Value.str('images/ui/inventorybg.png')],
   height : [inventoryHeight_35],
   item : [{
   height : [100],
   left : [3],
   top : [3],
   width : [100],
   _ : [true]}],
   left : [div((gameWidth_0-inventoryWidth_34))(2)],
   top : [(gameHeight_1-inventoryHeight_35)],
   width : [inventoryWidth_34],
   _ : [true]};
 var dialogTextColor_37=Color.rgb(220)(220)(220);
 var noOffset_38={
   left : [0],
   top : [0],
   _ : [true]};
 var noPadding_40={
   bottom : [0],
   left : [0],
   right : [0],
   top : [0],
   _ : [true]};
 var fadeTime_43=500;
 var descriptionTime_44=5000;
 var input_47=lift3(mkinput_46)(Time.every(0.1))(Mouse.isClicked)(Mouse.position);
 var gameAutomaton_48=init$(startState_26)(updateGame_45);
 var main_49=Automaton.run(gameAutomaton_48)(input_47);
 return {$op : {'>>>' : $op['>>>'], '|>' : $op['|>']},
 gameWidth:gameWidth_0,
 gameHeight:gameHeight_1,
 xga:xga_2,
 ico:ico_3,
 indexBy:indexBy_4,
 indexById:indexById_5,
 groupBy:groupBy_6,
 half:half_7,
 Screwdriver:Screwdriver_8,
 Superphone:Superphone_9,
 Office:Office_10,
 Corridor:Corridor_11,
 Infirmary:Infirmary_12,
 EscapePod:EscapePod_13,
 itemList:itemList_14,
 items:items_15,
 badItemId:badItemId_16,
 rooms:rooms_17,
 badRoomId:badRoomId_18,
 Idle:Idle_19,
 ShowDescription:ShowDescription_20,
 FadeOutTo:FadeOutTo_21,
 FadeInTo:FadeInTo_22,
 ChangeToRoom:ChangeToRoom_23,
 PickUpItem:PickUpItem_24,
 UseItem:UseItem_25,
 startState:startState_26,
 inRect:inRect_27,
 headMaybe:headMaybe_28,
 find:find_29,
 findRoom:findRoom_30,
 findItem:findItem_31,
 tryInTurn:tryInTurn_32,
 maybeMap:maybeMap_33,
 inventoryWidth:inventoryWidth_34,
 inventoryHeight:inventoryHeight_35,
 inventoryArea:inventoryArea_36,
 dialogTextColor:dialogTextColor_37,
 noOffset:noOffset_38,
 offsetBy:offsetBy_39,
 noPadding:noPadding_40,
 paddedBy:paddedBy_41,
 nthMaybe:nthMaybe_42,
 fadeTime:fadeTime_43,
 descriptionTime:descriptionTime_44,
 updateGame:updateGame_45,
 mkinput:mkinput_46,
 input:input_47,
 gameAutomaton:gameAutomaton_48,
 main:main_49};}();
Elm.main=function(){
 return Elm.Main.main;};
} catch (e) {
Elm.main=function() {
var msg = ('<br/><h2>Your browser may not be supported. Are you using a modern browser?</h2>' + '<br/><span style="color:grey">Runtime Error in Main module:<br/>' + e + '<br/><br/>The problem may stem from an improper usage of:<br/>Text.color, init\'</span>');
document.body.innerHTML = Elm.Text.monospace(msg);throw e;};}</script><div id="widthChecker" style="width:100%; height:1px; position:absolute; top:-1px;"></div><div id="content"></div><script type="text/javascript">Dispatcher.initialize()</script><noscript><p>images/bg/</p><p></p><p>'Trebuchet MS', Helvetica, sans-serif</p><p>Pick up </p><p></p><p>'Trebuchet MS', Helvetica, sans-serif</p><p>images/props/</p><p></p><p>images/icon/</p></noscript></body></html>